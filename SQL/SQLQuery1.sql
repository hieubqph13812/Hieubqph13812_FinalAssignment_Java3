CREATE DATABASE ASSIGNMENT
GO
USE ASSIGNMENT
GO
IF OBJECT_ID('STUDENT') IS NOT NULL
DROP TABLE STUDENT
GO
CREATE TABLE STUDENT
(
MASV NVARCHAR(50) NOT NULL,
HOTEN NVARCHAR(50) NULL,
EMAIL NVARCHAR(50)NULL,
SDT NVARCHAR(50)NULL,
GIOITINH NVARCHAR(5)NULL,
DIACHI NVARCHAR(50)NULL,
HINH NVARCHAR(50)NULL
CONSTRAINT PK_STUDENT PRIMARY KEY(MASV)
)
GO
IF OBJECT_ID('GRADE') IS NOT NULL
DROP TABLE GRADE
GO
CREATE TABLE GRADE
(
ID INT NOT NULL,
MASV NVARCHAR(50)  NULL,
TIENGANH FLOAT NULL,
TINHOC FLOAT NULL,
GDTC FLOAT NULL
CONSTRAINT PK_GRADE PRIMARY KEY(ID),
CONSTRAINT FK_GRADE_STUDENT FOREIGN KEY(MASV) REFERENCES STUDENT
)
GO
IF OBJECT_ID('USERS') IS NOT NULL
DROP TABLE USERS
GO
CREATE TABLE USERS
(
USERNAME NVARCHAR(50) NOT NULL,
PASS NVARCHAR(50)NULL,
ROLE NVARCHAR(50)NULL,
CONSTRAINT PK_USERS PRIMARY KEY(USERNAME)
)
GO
insert into USERS VALUES('admin','123','phongdaotao'),
                        ('hieubq','hieu002','giangvien'),
                        ('tholv','tho002','giangvien'),
                        ('nhatlh','nhat002','giangvien'),
                        ('maianh','manh003','giangvien')

INSERT STUDENT VALUES('PH13812',N'BÙI QUANG HI?U','HIEUBUI@FPT.EDU.VN','091237731','NAM',N'HÀ N?I',NULL),
                     ('PH13911',N'LÃ V?N TH?','THOLVPH13911@FPT.EDU.VN','033525111','NAM',N'H?I PHÒNG',NULL),
                     ('PH13912',N'LÊ HOÀNG NH?T','NHATLEESIN@FPT.EDU.VN','077321321','NAM',N'NGH? AN',NULL),
					 ('PH13914',N'V? TH? MAI LAN','MAILAN@FPT.EDU.VN','032177171',N'N?',N'NINH BÌNH',NULL),
					 ('PH13915',N'BÙI PHƯƠNG LINH','LINHBP@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL),
					 ('PH13916',N'BÙI THỊ MAI ANH','ANHBTM@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL),
					 ('PH13917',N'LÊ THỊ LY','LYLT@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL),
					 ('PH13918',N'LÊ THÀNH VINH','VINHLT@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL),
					 ('PH13919',N'NGUYỄN THỊ NGỌC THÚY','THUYNTN@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL),
					 ('PH13920',N'NGUYỄN ANH DŨNG','DUNGNA29@FPT.EDU.VN','099928322','NAM',N'THÁI NGUYÊN',NULL)

INSERT INTO GRADE VALUES('01','PH13812',6.50,7.50,8.50),
                         ('02','PH13911',3.50,10.50,8.50),
						 ('03','PH13912',9.50,8.00,8.50),
						 ('04','PH13914',6.50,7.50,4.50),
						 ('05','PH13915',9.50,9.50,2.50),
						 ('06','PH13916',9.50,9.50,2.50),
						 ('07','PH13917',9.50,9.50,2.50),
						 ('08','PH13918',9.50,9.50,2.50),
						 ('09','PH13919',9.50,9.50,2.50),
						 ('10','PH13920',9.50,9.50,2.50)
IF OBJECT_ID('UPDATEDIEM')IS NOT NULL
DROP PROC UPDATEDIEM
GO
CREATE PROC UPDATEDIEM
@MASV NVARCHAR(50),
@TIENGANH NVARCHAR(50),
@TINHOC NVARCHAR(50),
@GDTC NVARCHAR(50)
AS
UPDATE GRADE
SET TIENGANH=@TIENGANH,TINHOC=@TINHOC,GDTC=@GDTC
WHERE MASV=@MASV
GO 
SELECT *FROM GRADE
insert into GRADE VALUES(NULL,3.32,8.32,8.00)

delete from STUDENT
delete from USERS
delete from GRADE


select*from STUDENT
select*from USERS
select*from grade
insert into student values ('ph13011','hello','ph1h32123@gmail.com','031212383','nam','HÀ nỘI','snh.jpg')
delete from student where MASV='PH13941'
delete from grade where MASV='PH13941'
delete from USERS where USERNAME='admin2'
update STUDENT set HOTEN='HIẾU'
where MASV='PH13812'
insert into USERS VALUES('admin2','123','phongdaotao')
SELECT TOP 3 *,(TIENGANH + TINHOC + GDTC)/3 AS DTB FROM GRADE ORDER BY DTB desc
SELECT * FROM GRADE  WHERE MASV='PH13812'